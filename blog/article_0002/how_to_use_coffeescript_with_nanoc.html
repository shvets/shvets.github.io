<!doctype html>
<html lang='en'>
<head>
<!-- Always force latest IE rendering engine or request Chrome Frame -->
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='text/html; charset=utf-8' http-equiv='Content-type'>
<meta content="GitHub --- Alexander Shvets's Web Page" name='description'>
<meta content='github, ruby, java, rails' name='keywords'>
<title>GitHub --- Alexander Shvets's Web Page</title>
<link href="../../assets/stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
<script src="../../assets/javascripts/application.js" type="text/javascript"></script>
<link href='http://fonts.googleapis.com/css?family=Reenie+Beanie' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
</head>
<body>
<div id='wrapper'>
<div id='main-column'>
<div id='logo'>
<h1>
<a href='/'>Alexander Shvets GitHub Home Page</a>
</h1>

</div>
<div id='menu'>
<ul>
<li class='current_page_item'>
<a href='/index.html'>Projects</a>
</li>
<li class='current_page_item'>
<a href='/bookmarks/index.html'>Bookmarks</a>
</li>
<li class='current_page_item'>
<a href='/blog/index.html'>Blog</a>
</li>
</ul>

</div>
<div id='page'>
<h2>How to use CoffeeScript with nanoc</h2>

<p><strong>Step 1</strong>: Add <strong>coffee-script</strong> to <strong>Gemflie</strong>:</p>

<pre><code class="ruby">  gem &#39;coffee-script&#39;
</code></pre>

<p><strong>Step 2</strong>: Add <strong>coffee_filter.rb</strong> file to <strong>lib</strong> folder:</p>

<pre><code class="ruby">  require &#39;coffee-script&#39;

  class CoffeeFilter &lt; Nanoc3::Filter
    identifier :coffee

    def run(content, params = {})
      CoffeeScript.compile(content)
    end
  end
</code></pre>

<p><strong>Step 3</strong>: Add new rules to <strong>Rules</strong> file for compiling <strong>coffee-script</strong> files into <strong>javascript</strong> files:</p>

<pre><code class="ruby">  compile &#39;/assets/coffee/*/&#39; do
    filter :coffee
  end

  # so that the /assets/coffee/ item is copied to /javascripts/ item
  route &#39;/assets/coffee/*/&#39; do
    item.identifier.sub(%r{^/assets/coffee}, &#39;/javascripts&#39;).chop + &#39;.js&#39;
  end
</code></pre>

<p><strong>Step 4</strong>: Create your first coffescript file in <strong>source/assets/coffee</strong> directory:</p>

<pre><code class="coffee">  # test.coffee

  notify -> alert &quot;Hello, user!&quot;

  notify()
</code></pre>

<p><strong>Step 5</strong>: Compile your web site.</p>

<pre><code class="ruby">  nanoc3 compile
</code></pre>

<p>Compiled javascript files should be located in <strong>javascrips</strong> folder.</p>

<p>If you want to use coffee-script inside your haml partials, include this gem into &lsquo;Gemfile&rsquo;:</p>

<pre><code class="ruby">  gem &#39;coffee-filter&#39;
</code></pre>

<p>And include this fragment into partial:</p>

<pre><code class="coffee">:coffeescript
  window.notify = () -> alert &#39;Hello, user!&#39;
</code></pre>

<div id='footer'>
<p id='legal'>
&copy; All Right Reserved (2013), Alexander Shvets.
Built with
<a href='http://middlemanapp.com'>middleman</a>.
</p>

</div>
</div>
</div>
<div id='sidebar'>

</div>
</div>
</body>
</html>

<!doctype html>
<html lang='en'>
  <head>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='text/html; charset=utf-8' http-equiv='Content-type'>
    <meta content="GitHub --- Alexander Shvets's Web Page" name='description'>
    <meta content='github, ruby, java, rails' name='keywords'>
    <title>GitHub --- Alexander Shvets's Web Page</title>
    <link href="../../assets/stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../../assets/javascripts/application.js" type="text/javascript"></script>
    <link href='http://fonts.googleapis.com/css?family=Reenie+Beanie' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div id='wrapper'>
      <div id='main-column'>
        <div id='logo'>
          <h1>
            <a href='/'>Alexander Shvets GitHub Home Page</a>
          </h1>
        </div>
        <div id='menu'>
          <ul>
            <li class='current_page_item'>
              <a href='/index.html'>Projects</a>
            </li>
            <li class='current_page_item'>
              <a href='/bookmarks/index.html'>Bookmarks</a>
            </li>
            <li class='current_page_item'>
              <a href='/blog/index.html'>Blog</a>
            </li>
          </ul>
        </div>
        <div id='page'>
          <h2 id="how-to-use-coffeescript-with-nanoc">How to use CoffeeScript with nanoc</h2>
          
          <p><strong>Step 1</strong>: Add <strong>coffee-script</strong> to <strong>Gemflie</strong>:</p>
          <div class="CodeRay">
            <div class="code"><pre>gem <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">coffee-script</span><span style="color:#710">'</span></span>&#x000A;</pre></div>
          </div>
          <p><strong>Step 2</strong>: Add <strong>coffee_filter.rb</strong> file to <strong>lib</strong> folder:</p>
          <div class="CodeRay">
            <div class="code"><pre>require <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">coffee-script</span><span style="color:#710">'</span></span>&#x000A;&#x000A;<span style="color:#080;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CoffeeFilter</span> &lt; <span style="color:#036;font-weight:bold">Nanoc3</span>::<span style="color:#036;font-weight:bold">Filter</span>&#x000A;  identifier <span style="color:#A60">:coffee</span>&#x000A;&#x000A;  <span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">run</span>(content, params = {})&#x000A;    <span style="color:#036;font-weight:bold">CoffeeScript</span>.compile(content)&#x000A;  <span style="color:#080;font-weight:bold">end</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
          </div>
          <p><strong>Step 3</strong>: Add new rules to <strong>Rules</strong> file for compiling <strong>coffee-script</strong> files into <strong>javascript</strong> files:</p>
          <div class="CodeRay">
            <div class="code"><pre>compile <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/assets/coffee/*/</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>&#x000A;  filter <span style="color:#A60">:coffee</span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;&#x000A;<span style="color:#777"># so that the /assets/coffee/ item is copied to /javascripts/ item</span>&#x000A;route <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/assets/coffee/*/</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>&#x000A;  item.identifier.sub(<span style="background-color:hsla(300,100%,50%,0.06)"><span style="color:#404">%r{</span><span style="color:#808">^/assets/coffee</span><span style="color:#404">}</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/javascripts</span><span style="color:#710">'</span></span>).chop + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">.js</span><span style="color:#710">'</span></span>&#x000A;<span style="color:#080;font-weight:bold">end</span>&#x000A;</pre></div>
          </div>
          <p><strong>Step 4</strong>: Create your first coffescript file in <strong>source/assets/coffee</strong> directory:</p>
          <div class="CodeRay">
            <div class="code"><pre># test.coffee&#x000A;notify -&gt; alert &quot;Hello, user!&quot;&#x000A;&#x000A;notify()&#x000A;</pre></div>
          </div>
          <p><strong>Step 5</strong>: Compile your web site.</p>
          <div class="CodeRay">
            <div class="code"><pre>nanoc3 compile&#x000A;</pre></div>
          </div>
          <p>Compiled javascript files should be located in <strong>javascrips</strong> folder.</p>
          
          <p>If you want to use coffee-script inside your haml partials, include this gem into 'Gemfile':</p>
          <div class="CodeRay">
            <div class="code"><pre>gem <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">coffee-filter</span><span style="color:#710">'</span></span>&#x000A;</pre></div>
          </div>
          <p>And include this fragment into partial:</p>
          <div class="CodeRay">
            <div class="code"><pre>:coffeescript&#x000A;  window.notify = () -&gt; alert 'Hello, user!'&#x000A;</pre></div>
          </div>
          <script>
            (function() {
              window.notify = function() {
                return alert("Hello, user!");
              };
            
            }).call(this);
          </script>
          <br>
          <div>
            Click
            <a onclick='javascript:window.notify()'>here</a>
            to execute compiled javascript file from coffescript file on this page.
          </div>
          <div id='footer'>
            <p id='legal'>
              &copy; All Right Reserved (2013), Alexander Shvets.
              Built with
              <a href='http://middlemanapp.com'>middleman</a>.
            </p>
          </div>
        </div>
      </div>
      <div id='sidebar'>
        
      </div>
    </div>
  </body>
</html>

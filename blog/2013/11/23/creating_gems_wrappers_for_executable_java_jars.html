<!doctype html>
<html lang='en'>
<head>
<!-- Always force latest IE rendering engine or request Chrome Frame -->
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='text/html; charset=utf-8' http-equiv='Content-type'>
<meta content="GitHub --- Alexander Shvets's Web Page" name='description'>
<meta content='github, ruby, java, rails' name='keywords'>
<title>GitHub --- Alexander Shvets's Web Page</title>
<link href="/assets/stylesheets/screen.css" rel="stylesheet" type="text/css" />
<script src="/assets/javascripts/application.js" type="text/javascript"></script>
</head>
<body>
<div id='wrapper'>
<div id='main-column'>
<div id='logo'>
<h1>
<a href='/'>Alexander Shvets GitHub Home Page</a>
</h1>

</div>
<div id='menu'>
<ul>
<li class='current_page_item'>
<a href='/index.html'>Projects</a>
</li>
<li class='current_page_item'>
<a href='/bookmarks/index.html'>Bookmarks</a>
</li>
<li class='current_page_item'>
<a href='/blog/index.html'>Blog</a>
</li>
</ul>

</div>
<div id='page'>
<h1>Creating gems-wrappers for executable java jars</h1>

<p>Today I want to share little trick that lets us to use ruby distribution system (<strong>rubygems</strong>)
as delivery mechanism for java libraries/executables. The idea was borrowed
from <a href="https://github.com/redcar/redcar">redcar project</a> which in turn was borrowed/extracted from
<a href="https://github.com/jashkenas/ruby-processing">ruby-processing gem</a>. I am trying to extract important logic into separate
<a href="https://github.com/shvets/jar_wrapper">jar_wrapper gem</a>, so it can be easily used in any ruby project.</p>

<p>Install jar_wrapper with this command:</p>
<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ gem install jar_wrapper
</pre></td></tr></tbody></table>
</div>

<p>Now you can use it in your program directly or create gem for delivering java jar file(s).
For example, this code will upload remote file:</p>
<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre><pre class="lineno">2</pre><pre class="lineno">3</pre><pre class="lineno">4</pre><pre class="lineno">5</pre><pre class="lineno">6</pre><pre class="lineno">7</pre><pre class="lineno">8</pre><pre class="lineno">9</pre><pre class="lineno">10</pre><pre class="lineno">11</pre></td><td class="code"><pre><span class="nb">require</span> <span class="s1">'jar_wrapper'</span>

<span class="n">wrapper</span> <span class="o">=</span> <span class="no">JarWrapper</span><span class="o">::</span><span class="no">Runner</span><span class="p">.</span><span class="nf">new</span>
<span class="n">wrapper</span><span class="p">.</span><span class="nf">java_opts</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"-Xmx1024m"</span><span class="p">,</span> <span class="s2">"-Xss1024k"</span> <span class="o">]</span>

<span class="c1"># install jar file from source URL into target file:</span>

<span class="n">source</span> <span class="o">=</span> <span class="s2">"http://selenium.googlecode.com/files/selenium-server-2.37.0.zip"</span>
<span class="n">target</span> <span class="o">=</span> <span class="s2">"selenium-server.zip"</span>

<span class="n">wrapper</span><span class="p">.</span><span class="nf">install</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span>
</pre></td></tr></tbody></table>
</div>

<p>You can aldo execute jar file (a.k.a. &ldquo;java -jar jar_file.jar&rdquo;)</p>
<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre><pre class="lineno">2</pre><pre class="lineno">3</pre></td><td class="code"><pre><span class="n">wrapper</span><span class="p">.</span><span class="nf">jar_file</span> <span class="o">=</span> <span class="s2">"jar_file.jar"</span>

<span class="n">wrapper</span><span class="p">.</span><span class="nf">run</span>
</pre></td></tr></tbody></table>
</div>

<p>Or you can execute java jar file by specifying <strong>main class</strong> (a.k.a. &ldquo;java -cp some<em>class</em>path main_class&rdquo;):</p>
<div class="highlight ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre><pre class="lineno">2</pre><pre class="lineno">3</pre><pre class="lineno">4</pre></td><td class="code"><pre><span class="n">wrapper</span><span class="p">.</span><span class="nf">classpath</span> <span class="o">=</span> <span class="s2">"some_class_path"</span>
<span class="n">wrapper</span><span class="p">.</span><span class="nf">main_class</span> <span class="o">=</span> <span class="s2">"main_class"</span>

<span class="n">wrapper</span><span class="p">.</span><span class="nf">run</span>
</pre></td></tr></tbody></table>
</div>

<p>If you need more details on how to use it for practical gem, visit <a href="https://github.com/shvets/selenium">selenium gem</a>.
This gem downloads and create launcher for standalone selenium server.</p>

<div id='footer'>
<p id='legal'>
&copy; All Right Reserved (2013), Alexander Shvets.
Built with
<a href='http://middlemanapp.com'>middleman</a>
Get feed
<a href='/feed.xml'>here</a>
</p>

</div>
</div>
</div>
</div>
<div id='sidebar'>
<div class='section'>
<h2>By Year</h2>
<ol>
<li>
<a href="../../../2014.html">2014</a>
(1)
</li>
<li>
<a href="../../../2013.html">2013</a>
(15)
</li>
<li>
<a href="../../../2012.html">2012</a>
(1)
</li>
<li>
<a href="../../../2011.html">2011</a>
(1)
</li>
</ol>
</div>
<div class='section'>
<h2>Tags</h2>
<ol>
<li>
<a href="../../../tags/ruby.html">ruby</a>
(13)
</li>
<li>
<a href="../../../tags/jruby.html">jruby</a>
(2)
</li>
<li>
<a href="../../../tags/rubymine.html">rubymine</a>
(1)
</li>
<li>
<a href="../../../tags/nanoc.html">nanoc</a>
(1)
</li>
<li>
<a href="../../../tags/coffeescript.html">coffeescript</a>
(1)
</li>
<li>
<a href="../../../tags/bundler.html">bundler</a>
(1)
</li>
<li>
<a href="../../../tags/nodejs.html">nodejs</a>
(2)
</li>
<li>
<a href="../../../tags/javascript.html">javascript</a>
(2)
</li>
<li>
<a href="../../../tags/karma.html">karma</a>
(1)
</li>
<li>
<a href="../../../tags/code-coverage.html">code coverage</a>
(1)
</li>
<li>
<a href="../../../tags/commonjs.html">commonjs</a>
(1)
</li>
<li>
<a href="../../../tags/requirejs.html">requirejs</a>
(1)
</li>
<li>
<a href="../../../tags/sinatra.html">sinatra</a>
(1)
</li>
<li>
<a href="../../../tags/vegas.html">vegas</a>
(1)
</li>
<li>
<a href="../../../tags/launchy.html">launchy</a>
(1)
</li>
<li>
<a href="../../../tags/lunchy.html">lunchy</a>
(1)
</li>
<li>
<a href="../../../tags/rvm.html">rvm</a>
(1)
</li>
<li>
<a href="../../../tags/capybara.html">capybara</a>
(1)
</li>
<li>
<a href="../../../tags/selenium.html">selenium</a>
(1)
</li>
<li>
<a href="../../../tags/webkit.html">webkit</a>
(1)
</li>
<li>
<a href="../../../tags/phantomjs.html">phantomjs</a>
(1)
</li>
<li>
<a href="../../../tags/qt.html">qt</a>
(1)
</li>
<li>
<a href="../../../tags/acceptance-tests.html">acceptance tests</a>
(1)
</li>
<li>
<a href="../../../tags/simplecov.html">simplecov</a>
(1)
</li>
<li>
<a href="../../../tags/ci.html">CI</a>
(1)
</li>
<li>
<a href="../../../tags/webmock.html">webmock</a>
(1)
</li>
<li>
<a href="../../../tags/dsl.html">dsl</a>
(1)
</li>
<li>
<a href="../../../tags/zip.html">zip</a>
(1)
</li>
<li>
<a href="../../../tags/java.html">java</a>
(1)
</li>
<li>
<a href="../../../tags/jar.html">jar</a>
(1)
</li>
<li>
<a href="../../../tags/rake.html">rake</a>
(1)
</li>
<li>
<a href="../../../tags/thor.html">thor</a>
(1)
</li>
<li>
<a href="../../../tags/capistrano.html">capistrano</a>
(1)
</li>
<li>
<a href="../../../tags/chef.html">chef</a>
(1)
</li>
<li>
<a href="../../../tags/osx.html">osx</a>
(1)
</li>
<li>
<a href="../../../tags/mavericks.html">mavericks</a>
(1)
</li>
</ol>
</div>

</div>
</body>
</html>
